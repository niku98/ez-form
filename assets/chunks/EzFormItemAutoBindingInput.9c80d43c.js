import{a2 as C,S as qe,R as le,a7 as we,ai as Ve,w as _,f as ye,j as K,a3 as de,e as Ie,m as je,aj as _e,l as N,ak as Se,X as Ne,a1 as Re,F as Te,ad as Oe,d as Be}from"./framework.f385a0f3.js";function k(){return k=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},k.apply(this,arguments)}function $e(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,H(t,e)}function ne(t){return ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ne(t)}function H(t,e){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,n){return a.__proto__=n,a},H(t,e)}function Me(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Q(t,e,r){return Me()?Q=Reflect.construct.bind():Q=function(n,f,i){var s=[null];s.push.apply(s,f);var u=Function.bind.apply(n,s),c=new u;return i&&H(c,i.prototype),c},Q.apply(null,arguments)}function De(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function ae(t){var e=typeof Map=="function"?new Map:void 0;return ae=function(a){if(a===null||!De(a))return a;if(typeof a!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(a))return e.get(a);e.set(a,n)}function n(){return Q(a,arguments,ne(this).constructor)}return n.prototype=Object.create(a.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),H(n,a)},ae(t)}var ke=/%[sdj%]/g,Ce=function(){};typeof process<"u"&&process.env;function ie(t){if(!t||!t.length)return null;var e={};return t.forEach(function(r){var a=r.field;e[a]=e[a]||[],e[a].push(r)}),e}function I(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),a=1;a<e;a++)r[a-1]=arguments[a];var n=0,f=r.length;if(typeof t=="function")return t.apply(null,r);if(typeof t=="string"){var i=t.replace(ke,function(s){if(s==="%%")return"%";if(n>=f)return s;switch(s){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch{return"[Circular]"}break;default:return s}});return i}return t}function Ke(t){return t==="string"||t==="url"||t==="hex"||t==="email"||t==="date"||t==="pattern"}function x(t,e){return!!(t==null||e==="array"&&Array.isArray(t)&&!t.length||Ke(e)&&typeof t=="string"&&!t)}function ze(t,e,r){var a=[],n=0,f=t.length;function i(s){a.push.apply(a,s||[]),n++,n===f&&r(a)}t.forEach(function(s){e(s,i)})}function pe(t,e,r){var a=0,n=t.length;function f(i){if(i&&i.length){r(i);return}var s=a;a=a+1,s<n?e(t[s],f):r([])}f([])}function Le(t){var e=[];return Object.keys(t).forEach(function(r){e.push.apply(e,t[r]||[])}),e}var ve=function(t){$e(e,t);function e(r,a){var n;return n=t.call(this,"Async Validation Error")||this,n.errors=r,n.fields=a,n}return e}(ae(Error));function We(t,e,r,a,n){if(e.first){var f=new Promise(function(b,j){var V=function(l){return a(l),l.length?j(new ve(l,ie(l))):b(n)},m=Le(t);pe(m,r,V)});return f.catch(function(b){return b}),f}var i=e.firstFields===!0?Object.keys(t):e.firstFields||[],s=Object.keys(t),u=s.length,c=0,p=[],h=new Promise(function(b,j){var V=function(q){if(p.push.apply(p,q),c++,c===u)return a(p),p.length?j(new ve(p,ie(p))):b(n)};s.length||(a(p),b(n)),s.forEach(function(m){var q=t[m];i.indexOf(m)!==-1?pe(q,r,V):ze(q,r,V)})});return h.catch(function(b){return b}),h}function Ue(t){return!!(t&&t.message!==void 0)}function Ge(t,e){for(var r=t,a=0;a<e.length;a++){if(r==null)return r;r=r[e[a]]}return r}function he(t,e){return function(r){var a;return t.fullFields?a=Ge(e,t.fullFields):a=e[r.field||t.fullField],Ue(r)?(r.field=r.field||t.fullField,r.fieldValue=a,r):{message:typeof r=="function"?r():r,fieldValue:a,field:r.field||t.fullField}}}function Fe(t,e){if(e){for(var r in e)if(e.hasOwnProperty(r)){var a=e[r];typeof a=="object"&&typeof t[r]=="object"?t[r]=k({},t[r],a):t[r]=a}}return t}var xe=function(e,r,a,n,f,i){e.required&&(!a.hasOwnProperty(e.field)||x(r,i||e.type))&&n.push(I(f.messages.required,e.fullField))},Je=function(e,r,a,n,f){(/^\s+$/.test(r)||r==="")&&n.push(I(f.messages.whitespace,e.fullField))},X,Ze=function(){if(X)return X;var t="[a-fA-F\\d:]",e=function(d){return d&&d.includeBoundaries?"(?:(?<=\\s|^)(?="+t+")|(?<="+t+")(?=\\s|$))":""},r="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",a="[a-fA-F\\d]{1,4}",n=(`
(?:
(?:`+a+":){7}(?:"+a+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+a+":){6}(?:"+r+"|:"+a+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+a+":){5}(?::"+r+"|(?::"+a+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+a+":){4}(?:(?::"+a+"){0,1}:"+r+"|(?::"+a+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+a+":){3}(?:(?::"+a+"){0,2}:"+r+"|(?::"+a+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+a+":){2}(?:(?::"+a+"){0,3}:"+r+"|(?::"+a+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+a+":){1}(?:(?::"+a+"){0,4}:"+r+"|(?::"+a+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+a+"){0,5}:"+r+"|(?::"+a+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),f=new RegExp("(?:^"+r+"$)|(?:^"+n+"$)"),i=new RegExp("^"+r+"$"),s=new RegExp("^"+n+"$"),u=function(d){return d&&d.exact?f:new RegExp("(?:"+e(d)+r+e(d)+")|(?:"+e(d)+n+e(d)+")","g")};u.v4=function(y){return y&&y.exact?i:new RegExp(""+e(y)+r+e(y),"g")},u.v6=function(y){return y&&y.exact?s:new RegExp(""+e(y)+n+e(y),"g")};var c="(?:(?:[a-z]+:)?//)",p="(?:\\S+(?::\\S*)?@)?",h=u.v4().source,b=u.v6().source,j="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",V="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",m="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",q="(?::\\d{2,5})?",l='(?:[/?#][^\\s"]*)?',O="(?:"+c+"|www\\.)"+p+"(?:localhost|"+h+"|"+b+"|"+j+V+m+")"+q+l;return X=new RegExp("(?:^"+O+"$)","i"),X},be={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},G={integer:function(e){return G.number(e)&&parseInt(e,10)===e},float:function(e){return G.number(e)&&!G.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return typeof e=="object"&&!G.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(be.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(Ze())},hex:function(e){return typeof e=="string"&&!!e.match(be.hex)}},He=function(e,r,a,n,f){if(e.required&&r===void 0){xe(e,r,a,n,f);return}var i=["integer","float","array","regexp","object","method","email","number","date","url","hex"],s=e.type;i.indexOf(s)>-1?G[s](r)||n.push(I(f.messages.types[s],e.fullField,e.type)):s&&typeof r!==e.type&&n.push(I(f.messages.types[s],e.fullField,e.type))},Ye=function(e,r,a,n,f){var i=typeof e.len=="number",s=typeof e.min=="number",u=typeof e.max=="number",c=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,p=r,h=null,b=typeof r=="number",j=typeof r=="string",V=Array.isArray(r);if(b?h="number":j?h="string":V&&(h="array"),!h)return!1;V&&(p=r.length),j&&(p=r.replace(c,"_").length),i?p!==e.len&&n.push(I(f.messages[h].len,e.fullField,e.len)):s&&!u&&p<e.min?n.push(I(f.messages[h].min,e.fullField,e.min)):u&&!s&&p>e.max?n.push(I(f.messages[h].max,e.fullField,e.max)):s&&u&&(p<e.min||p>e.max)&&n.push(I(f.messages[h].range,e.fullField,e.min,e.max))},L="enum",Xe=function(e,r,a,n,f){e[L]=Array.isArray(e[L])?e[L]:[],e[L].indexOf(r)===-1&&n.push(I(f.messages[L],e.fullField,e[L].join(", ")))},Qe=function(e,r,a,n,f){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(r)||n.push(I(f.messages.pattern.mismatch,e.fullField,r,e.pattern));else if(typeof e.pattern=="string"){var i=new RegExp(e.pattern);i.test(r)||n.push(I(f.messages.pattern.mismatch,e.fullField,r,e.pattern))}}},v={required:xe,whitespace:Je,type:He,range:Ye,enum:Xe,pattern:Qe},er=function(e,r,a,n,f){var i=[],s=e.required||!e.required&&n.hasOwnProperty(e.field);if(s){if(x(r,"string")&&!e.required)return a();v.required(e,r,n,i,f,"string"),x(r,"string")||(v.type(e,r,n,i,f),v.range(e,r,n,i,f),v.pattern(e,r,n,i,f),e.whitespace===!0&&v.whitespace(e,r,n,i,f))}a(i)},rr=function(e,r,a,n,f){var i=[],s=e.required||!e.required&&n.hasOwnProperty(e.field);if(s){if(x(r)&&!e.required)return a();v.required(e,r,n,i,f),r!==void 0&&v.type(e,r,n,i,f)}a(i)},tr=function(e,r,a,n,f){var i=[],s=e.required||!e.required&&n.hasOwnProperty(e.field);if(s){if(r===""&&(r=void 0),x(r)&&!e.required)return a();v.required(e,r,n,i,f),r!==void 0&&(v.type(e,r,n,i,f),v.range(e,r,n,i,f))}a(i)},nr=function(e,r,a,n,f){var i=[],s=e.required||!e.required&&n.hasOwnProperty(e.field);if(s){if(x(r)&&!e.required)return a();v.required(e,r,n,i,f),r!==void 0&&v.type(e,r,n,i,f)}a(i)},ar=function(e,r,a,n,f){var i=[],s=e.required||!e.required&&n.hasOwnProperty(e.field);if(s){if(x(r)&&!e.required)return a();v.required(e,r,n,i,f),x(r)||v.type(e,r,n,i,f)}a(i)},ir=function(e,r,a,n,f){var i=[],s=e.required||!e.required&&n.hasOwnProperty(e.field);if(s){if(x(r)&&!e.required)return a();v.required(e,r,n,i,f),r!==void 0&&(v.type(e,r,n,i,f),v.range(e,r,n,i,f))}a(i)},sr=function(e,r,a,n,f){var i=[],s=e.required||!e.required&&n.hasOwnProperty(e.field);if(s){if(x(r)&&!e.required)return a();v.required(e,r,n,i,f),r!==void 0&&(v.type(e,r,n,i,f),v.range(e,r,n,i,f))}a(i)},fr=function(e,r,a,n,f){var i=[],s=e.required||!e.required&&n.hasOwnProperty(e.field);if(s){if(r==null&&!e.required)return a();v.required(e,r,n,i,f,"array"),r!=null&&(v.type(e,r,n,i,f),v.range(e,r,n,i,f))}a(i)},ur=function(e,r,a,n,f){var i=[],s=e.required||!e.required&&n.hasOwnProperty(e.field);if(s){if(x(r)&&!e.required)return a();v.required(e,r,n,i,f),r!==void 0&&v.type(e,r,n,i,f)}a(i)},or="enum",lr=function(e,r,a,n,f){var i=[],s=e.required||!e.required&&n.hasOwnProperty(e.field);if(s){if(x(r)&&!e.required)return a();v.required(e,r,n,i,f),r!==void 0&&v[or](e,r,n,i,f)}a(i)},dr=function(e,r,a,n,f){var i=[],s=e.required||!e.required&&n.hasOwnProperty(e.field);if(s){if(x(r,"string")&&!e.required)return a();v.required(e,r,n,i,f),x(r,"string")||v.pattern(e,r,n,i,f)}a(i)},cr=function(e,r,a,n,f){var i=[],s=e.required||!e.required&&n.hasOwnProperty(e.field);if(s){if(x(r,"date")&&!e.required)return a();if(v.required(e,r,n,i,f),!x(r,"date")){var u;r instanceof Date?u=r:u=new Date(r),v.type(e,u,n,i,f),u&&v.range(e,u.getTime(),n,i,f)}}a(i)},mr=function(e,r,a,n,f){var i=[],s=Array.isArray(r)?"array":typeof r;v.required(e,r,n,i,f,s),a(i)},re=function(e,r,a,n,f){var i=e.type,s=[],u=e.required||!e.required&&n.hasOwnProperty(e.field);if(u){if(x(r,i)&&!e.required)return a();v.required(e,r,n,s,f,i),x(r,i)||v.type(e,r,n,s,f)}a(s)},gr=function(e,r,a,n,f){var i=[],s=e.required||!e.required&&n.hasOwnProperty(e.field);if(s){if(x(r)&&!e.required)return a();v.required(e,r,n,i,f)}a(i)},Z={string:er,method:rr,number:tr,boolean:nr,regexp:ar,integer:ir,float:sr,array:fr,object:ur,enum:lr,pattern:dr,date:cr,url:re,hex:re,email:re,required:mr,any:gr};function se(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var fe=se(),W=function(){function t(r){this.rules=null,this._messages=fe,this.define(r)}var e=t.prototype;return e.define=function(a){var n=this;if(!a)throw new Error("Cannot configure a schema with no rules");if(typeof a!="object"||Array.isArray(a))throw new Error("Rules must be an object");this.rules={},Object.keys(a).forEach(function(f){var i=a[f];n.rules[f]=Array.isArray(i)?i:[i]})},e.messages=function(a){return a&&(this._messages=Fe(se(),a)),this._messages},e.validate=function(a,n,f){var i=this;n===void 0&&(n={}),f===void 0&&(f=function(){});var s=a,u=n,c=f;if(typeof u=="function"&&(c=u,u={}),!this.rules||Object.keys(this.rules).length===0)return c&&c(null,s),Promise.resolve(s);function p(m){var q=[],l={};function O(d){if(Array.isArray(d)){var o;q=(o=q).concat.apply(o,d)}else q.push(d)}for(var y=0;y<m.length;y++)O(m[y]);q.length?(l=ie(q),c(q,l)):c(null,s)}if(u.messages){var h=this.messages();h===fe&&(h=se()),Fe(h,u.messages),u.messages=h}else u.messages=this.messages();var b={},j=u.keys||Object.keys(this.rules);j.forEach(function(m){var q=i.rules[m],l=s[m];q.forEach(function(O){var y=O;typeof y.transform=="function"&&(s===a&&(s=k({},s)),l=s[m]=y.transform(l)),typeof y=="function"?y={validator:y}:y=k({},y),y.validator=i.getValidationMethod(y),y.validator&&(y.field=m,y.fullField=y.fullField||m,y.type=i.getType(y),b[m]=b[m]||[],b[m].push({rule:y,value:l,source:s,field:m}))})});var V={};return We(b,u,function(m,q){var l=m.rule,O=(l.type==="object"||l.type==="array")&&(typeof l.fields=="object"||typeof l.defaultField=="object");O=O&&(l.required||!l.required&&m.value),l.field=m.field;function y(g,w){return k({},w,{fullField:l.fullField+"."+g,fullFields:l.fullFields?[].concat(l.fullFields,[g]):[g]})}function d(g){g===void 0&&(g=[]);var w=Array.isArray(g)?g:[g];!u.suppressWarning&&w.length&&t.warning("async-validator:",w),w.length&&l.message!==void 0&&(w=[].concat(l.message));var F=w.map(he(l,s));if(u.first&&F.length)return V[l.field]=1,q(F);if(!O)q(F);else{if(l.required&&!m.value)return l.message!==void 0?F=[].concat(l.message).map(he(l,s)):u.error&&(F=[u.error(l,I(u.messages.required,l.field))]),q(F);var E={};l.defaultField&&Object.keys(m.value).map(function(S){E[S]=l.defaultField}),E=k({},E,m.rule.fields);var B={};Object.keys(E).forEach(function(S){var A=E[S],z=Array.isArray(A)?A:[A];B[S]=z.map(y.bind(null,S))});var U=new t(B);U.messages(u.messages),m.rule.options&&(m.rule.options.messages=u.messages,m.rule.options.error=u.error),U.validate(m.value,m.rule.options||u,function(S){var A=[];F&&F.length&&A.push.apply(A,F),S&&S.length&&A.push.apply(A,S),q(A.length?A:null)})}}var o;if(l.asyncValidator)o=l.asyncValidator(l,m.value,d,m.source,u);else if(l.validator){try{o=l.validator(l,m.value,d,m.source,u)}catch(g){console.error==null||console.error(g),u.suppressValidatorError||setTimeout(function(){throw g},0),d(g.message)}o===!0?d():o===!1?d(typeof l.message=="function"?l.message(l.fullField||l.field):l.message||(l.fullField||l.field)+" fails"):o instanceof Array?d(o):o instanceof Error&&d(o.message)}o&&o.then&&o.then(function(){return d()},function(g){return d(g)})},function(m){p(m)},s)},e.getType=function(a){if(a.type===void 0&&a.pattern instanceof RegExp&&(a.type="pattern"),typeof a.validator!="function"&&a.type&&!Z.hasOwnProperty(a.type))throw new Error(I("Unknown rule type %s",a.type));return a.type||"string"},e.getValidationMethod=function(a){if(typeof a.validator=="function")return a.validator;var n=Object.keys(a),f=n.indexOf("message");return f!==-1&&n.splice(f,1),n.length===1&&n[0]==="required"?Z.required:Z[this.getType(a)]||void 0},t}();W.register=function(e,r){if(typeof r!="function")throw new Error("Cannot register a validator by type, validator is not a function");Z[e]=r};W.warning=Ce;W.messages=fe;W.validators=Z;const _r=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"}));function J(t,e=[]){return t?Array.isArray(t)?t:[t]:e}const yr=Symbol("ezFormInjectKey"),ue=Symbol(),oe=Symbol(),Sr=Symbol(),R=C({}),Nr=()=>({name:{required:!1,type:String},form:{required:!1,type:Object},initialValues:{required:!1,type:Object},enableReinitialize:{required:!1,type:Boolean},rules:{required:!1,type:Object},validateTrigger:{required:!1,type:[String,Array]},validateMessages:{required:!1,type:Object},classPrefix:{required:!1,type:String,default:"ez"},preserveValues:{required:!1,type:Boolean,default:!0},onSubmit:{required:!1,type:Function},onChange:{required:!1,type:Function},onError:{required:!1,type:Function},onReset:{required:!1,type:Function}}),Rr=()=>({label:{required:!1,type:String},name:{required:!1,type:[String,Array]},formItem:{required:!1,type:Object},defaultValue:{required:!1},valuePropName:{required:!1,type:String,default:"value"},changeEventPropName:{required:!1,type:String,default:"input"},blurEventPropName:{required:!1,type:String,default:"blur"},getValueFromChangeEvent:{required:!1,type:Function,default:t=>t!=null&&t.target?t.target.value??t.target.checked:t},valueTransformer:{required:!1,type:Object,default:()=>({in:t=>t,out:t=>t})},autoBinding:{required:!1,type:Boolean,default:!0},inputNodeIndex:{required:!1,type:Number,default:0},rules:{required:!1,type:[Object,Array]},requiredMark:{required:!1,type:[String,Boolean],default:!0},validateTrigger:{required:!1,type:[String,Array],default:"change"},validateFirst:{required:!1,type:Boolean},noStyle:{required:!1,type:Boolean},colon:{required:!1,type:Boolean}}),Tr=()=>({label:{required:!1,type:String},name:{type:[String,Array],required:!0},formList:{required:!1,type:Object},defaultValue:{required:!1,type:Array},valuePropName:{required:!1,type:String,default:"value"},changeEventPropName:{required:!1,type:String},blurEventPropName:{required:!1,type:String,default:"blur"},getValueFromChangeEvent:{required:!1,type:Function,default:t=>t!=null&&t.target?t.target.value??t.target.checked:t},valueTransformer:{required:!1,type:Object,default:()=>({in:t=>t,out:t=>t})},autoBinding:{required:!1,type:Boolean,default:!0},rules:{required:!1,type:[Object,Array]},requiredMark:{required:!1,type:[String,Boolean],default:!0},validateTrigger:{required:!1,type:[String,Array],default:"change"},validateFirst:{required:!1,type:Boolean},noStyle:{required:!1,type:Boolean}});function pr(t){for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(t[e]=void 0);return t}function P(t){const e=Array.isArray(t)?[]:{};for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const a=t[r];e[r]=typeof a=="object"&&a!==null?P(a):a}return e}function M(t){return Array.isArray(t)?t.reduce((e,r)=>(e.push(String(r)),e),[]):typeof t=="string"?t.replace(/\[([\d\w]+)\]/g,".$1").split("."):[String(t)]}function $(t){return M(t).join(".")}function Y(t,e,r=void 0){const a=M(e);let n=0;for(;n<a.length&&t!=null;n++)t=t[a[n]];return n&&n===a.length?t:void 0}function te(t,e,r,a){const n=M(e);let f=0;for(;f<n.length&&t!=null;f++){let i=r;const s=n[f];if(f!==n.length-1){const u=t[s];i=a?a(t,s,f,n):void 0,i===void 0&&(i=typeof u=="object"?u:Number.isNaN(Number(n[f+1]))?{}:[])}t[s]=i,t=t[s]}}function vr(t,e){const r=M(e);if(t=Y(t,r.slice(0,-1)),t){const a=r.pop();a&&delete t[a]}}function D(t){return Object.values(t)}function Pe(t){qe(ue,t)}function hr(t){qe(oe,t)}function ce(t,e=100,r=!0){let a,n;return(...f)=>(!a&&r&&(n=t(...f)),clearTimeout(a),a=setTimeout(()=>{n=t(...f)},e),n)}function ee(t,e){const r=typeof t,a=typeof e;if(r!==a)return!1;if(r!=="object"&&a!=="object")return t===e;const n=Object.keys(t),f=Object.keys(e);if(n.length!==f.length)return!1;for(const i of n){const s=t[i],u=e[i];if(!ee(s,u))return!1}return!0}function T(t=6){let e="";const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=r.length;for(let n=0;n<t;n++)e+=r.charAt(Math.floor(Math.random()*a));return e}function Ae(){return le(yr,{})}function Fr(t){const e=Ae(),r=C(we(t)??{classPrefix:"ez",name:T()});r.name=r.name||T(),r.classPrefix=r.classPrefix||"ez";function a(o,g=!1){Object.assign(r,{...o,name:o.name||r.name||T(),classPrefix:o.classPrefix||"ez"}),g&&(f(r.initialValues,!0),O())}t&&Ve(t)&&_(t,()=>{a({...t})});const{initialValues:n,setInitialValues:f,getClonedInitialValues:i}=br(ye(r,"initialValues"),ye(r,"enableReinitialize"),()=>{m(),O()}),s=C({dirty:!1,get name(){return r.name??""},values:i(),errors:[]});function u(o){s.dirty=!1,s.errors=[],o!==void 0&&(s.values=o)}const c=C({});function p(o){const g=$(o.name.value);c[g]=o,m()}function h(o){const g=$(o);r.preserveValues===!1&&vr(s.values,o),delete c[g]}function b(o){return o?D(c).filter(({name:g})=>o?ee(g,o):!0).some(({dirty:g})=>g):s.dirty}function j(o,g,w=!0){if(te(s.values,o,g),w){s.dirty=!0;const F=c[$(o)];F&&F.markAsDirty()}}function V(o){return Y(s.values,o)}function m(){D(c).forEach(o=>{o.defaultValue!==void 0&&Y(n.value,o.name)===void 0&&te(n.value,o.name,o.defaultValue)})}function q(o){var g,w;if(o){const F=$(o);(w=(g=c[F])==null?void 0:g.clearValidate)==null||w.call(g)}else D(c).forEach(({clearValidate:F})=>{F()})}function l(o,g){const w=J(o),F=w.length?D(c).filter(({name:E})=>w.some(B=>ee(M(B),M(E)))):D(c);return new Promise(async E=>{const B=await Promise.all(F.map(({name:A,validate:z})=>z(g).then(({value:Ee,error:ge})=>ge||{name:A,value:Ee}))),U=B.filter(A=>!!A.messages),S=U.length>0;E(S?{errors:U,values:void 0}:{values:B.reduce((A,z)=>(te(A,z.name,z.value),A),{}),errors:void 0})})}_(c,ce(()=>{s.errors=D(c).map(o=>o.error).filter(o=>o!==void 0)},500),{immediate:!0});function O(o){const g=!ee(i(),{}),w=D(c);pr(s.values),u(),w.forEach(({reset:F})=>{F()}),o?Object.assign(s.values,P(o)):g&&Object.assign(s.values,i())}const d={meta:s,fields:c,get initialValues(){return P(n.value)},submit:(o,g)=>{if(o||g){l().then(({errors:w})=>{if(w)g==null||g(w);else{const F=P(s.values);o==null||o(F)}});return}return new Promise(w=>{l().then(({errors:F})=>{const E=F===void 0?P(s.values):void 0;w({values:E,errors:F})})})},reset:O,setFieldValue:j,getFieldValue:V,validate:l,isDirty:b,updateSettings:a,addField:p,removeField:h,clearValidate:q,get classPrefix(){return r.classPrefix??""},get rules(){return r.rules},get validateMessages(){return r.validateMessages??(e==null?void 0:e.validateMessages)},get validateTrigger(){return r.validateTrigger}};return qr(s,d),Pe(d),d}function br(t,e,r){const a=K(t.value??{}),n=K(t.value??{}),f=K(u()),i=()=>n.value?P(Ie(n)):{};function s(c,p=!1){n.value=P(c),p&&(a.value=P(c))}function u(){if(e.value)return _(t.value,c=>{s(P(c),!0),r(P(c))},{deep:!0})}return _(e,()=>{if(e.value){f.value=u();return}f.value&&f.value()}),{initialValues:n,originalInitialValues:a,setInitialValues:s,getClonedInitialValues:i}}function qr(t,e){_(()=>t.name,(r,a)=>{var s,u;let n={},f={};if(a){const c=(s=R[a])==null?void 0:s.items,p=(u=R[a])==null?void 0:u.lists;n=c?P(c):{},f=p?P(p):{},delete R[a]}const i=R[r];i?(i.instance=e,i.items={...n,...i.items},i.lists={...f,...i.lists}):R[r]={instance:e,items:n,lists:f}},{immediate:!0}),de(()=>{delete R[t.name]})}function Br(t,e){const r=t.form??Fr(t);t.form&&(r.updateSettings({...t},!0),_(t,ce(()=>{r.updateSettings({...t})},500)));const a=r.submit,n=(s,u)=>s||u?a(c=>{e("submit",c),s==null||s(c)},c=>{e("error",c),u==null||u(c)}):new Promise(c=>{a().then(({values:p,errors:h})=>{h?(e("error",h),c({errors:h})):(e("submit",p),c({values:p}))})});r.submit=n;const f=r.reset,i=s=>{f(s),e("reset")};return r.reset=i,_(r.meta.values,s=>{e("change",P(s))}),Pe(r),{submit:n,reset:i,formInstance:r}}function me(){return je().provides[ue]??le(ue,{__IS_FAKE__:!0,addField(){},removeField(){},updateSettings(){},getFieldValue(){},setFieldValue(){},reset(){},clearValidate(){},async validate(){return{}},submit(){},isDirty(){return!1},meta:C({values:void 0,name:T(),errors:[],dirty:!1}),classPrefix:""})}function wr(){const t=me();return t.__IS_FAKE__&&Object.assign(t,{fields:{}}),t}function Vr(t){let e=wr();const r=K(void 0),a=T(),n=_e(t?we(t):{});function f(d){Object.assign(n,{...d})}t&&Ve(t)&&_(t,()=>{f({...t})});const i=C({get rawValue(){return e.__IS_FAKE__||!n.name?r.value:n.name?Y(e.meta.values,n.name):r.value},set rawValue(d){if(this.dirty=!0,this.touched=!0,e.__IS_FAKE__||!n.name){r.value=d;return}n.name&&e.setFieldValue(n.name,d)},get transformedValue(){return n.valueTransformer?n.valueTransformer.in(this.rawValue,e):this.rawValue},set transformedValue(d){this.rawValue=n.valueTransformer?n.valueTransformer.out(d,e):d},get name(){return n.name},dirty:!1,touched:!1,get id(){return n.name?`${this.formName}_${M(n.name).join("_")}`:`${this.formName}_${a}`},get formName(){return e.meta.name}});function s(){i.dirty=!1,i.touched=!1,i.error=void 0,e.__IS_FAKE__||!n.name?i.rawValue=P(n.defaultValue):n.name&&(i.rawValue=Y(e.initialValues,n.name))}const u=N(()=>J(n.validateTrigger??"change",J(e.validateTrigger))),c=N(()=>{const d=J(n.rules);if(!n.name)return d;const o=e.rules,g=$(n.name),w=o==null?void 0:o[g],F=J(w);return d.concat(F)});function p(){i.error=void 0}async function h(d){const o=d!=null&&d.trigger?c.value.filter(F=>F.trigger?F.trigger===d.trigger:!0):c.value;if(o.length===0)return Promise.resolve({value:P(i.rawValue)});const g=n.label?n.label:n.name?M(n.name).pop()??T():T(),w=new W({[g]:o});return e.validateMessages&&w.messages(e.validateMessages),new Promise(F=>{w.validate({[g]:i.rawValue},{first:n.validateFirst??!1},E=>{E===null||E.length===0?(p(),F({value:i.rawValue})):(i.error={name:n.name??[],messages:E.map(({message:B})=>B??"")},F({error:P(i.error)}))})})}function b(d){return d instanceof Event&&d.target?d.target.value??d.target.checked:d}function j(d){i.transformedValue=n.getValueFromChangeEvent?n.getValueFromChangeEvent(d):b(d),u.value.includes("change")&&Ne(()=>{h({trigger:"change"}).catch(()=>{})})}function V(){i.touched=!0,u.value.includes("blur")&&h({trigger:"blur"}).catch(()=>{})}Se(()=>{n.defaultValue!==void 0&&i.rawValue===void 0&&(i.rawValue=P(n.defaultValue))});const m=Ae(),q=N(()=>{if(!c.value.some(g=>g.required))return"";const o=(m==null?void 0:m.requiredMark)??"*";switch(typeof n.requiredMark){case"boolean":return n.requiredMark?`'${o}'`:"";case"string":return`'${n.requiredMark}'`;default:return`'${o}'`}});function l(){return{name:N(()=>n.name??[]),id:N(()=>i.id),value:N(()=>i.rawValue),validate:h,clearValidate:p,reset:s,get defaultValue(){return n.defaultValue},error:N(()=>i.error),dirty:N(()=>i.dirty),markAsDirty(){i.dirty=!0,i.touched=!0}}}function O(d){d?(d.addField(l()),e=d):e.addField(l())}function y(d){n.name&&e.removeField(n.name),d&&e.removeField(d)}return{fieldMeta:i,requiredMarkString:q,registerFormField:O,unRegisterFormField:y,handleChange:j,handleBlur:V,validate:h,resetFieldMeta:s,clearValidate:p,updateProps:f,props:n,get injectedForm(){return e},getFormFieldObject:l}}function jr(t){const e=Vr(t),{fieldMeta:r,validate:a,requiredMarkString:n,handleBlur:f,handleChange:i,resetFieldMeta:s,clearValidate:u,updateProps:c,props:p}=e,h={reset:s,meta:r,handleBlur:f,validate:a,handleChange:i,clearValidate:u,requiredMarkString:n,registerFormField:q,unRegisterFormField:l,updateProps:c,props:p},b=K(()=>{}),j=Or(r,h),V=K(()=>()=>{}),m=K(()=>{});function q(O){m.value(),b.value(),e.registerFormField(O),m.value=V.value(),b.value=j()}function l(O){e.unRegisterFormField(O),m.value(),b.value()}return q(),_(()=>p.name,(O,y)=>{y&&l(y),q()},{immediate:!0}),de(()=>{l()}),h}function Or(t,e){return de(()=>{if(!t.name)return;const r=R[t.formName];if(!r)return;const a=$(t.name);r.items&&delete r.items[a]}),()=>{const r=t.formName,a=t.formName,n=_(()=>t.name,(f,i)=>{R[t.formName]||(R[t.formName]={});let s=R[t.formName];if(!s)return;if(i){const c=$(i);s.items&&delete s.items[c]}if(!f)return;const u=$(f);s.items?s.items[u]=e:s.items={[u]:e}},{immediate:!0});return()=>{if(!a)return;const f=R[r];if(!f)return;const i=$(a);f.items&&delete f.items[i],n()}}}function xr(t,e){const{meta:r,handleBlur:a,handleChange:n}=t,f=me(),i=N(()=>e.changeEventPropName??`update:${e.valuePropName}`),s=Re(),u=N(()=>({value:r.transformedValue,rawValue:r.rawValue,handleChange:n,form:f,error:r.error})),c=()=>s.default?p(s.default):[],p=b=>{const j=(b&&b(u))??[];if(j.length&&j[0].type===Te){const{children:V}=j[0];return V===null?[]:typeof V=="string"?[Oe(V)]:[...Array.isArray(V)?V:p(V.default),...j.slice(1)]}return(s.default&&s.default(u))??[]};return{getVNodesFromDefaultSlot:c,slotData:u,getInputItemProps:b=>{if(b.component===null&&["input","select","textarea"].includes(String(b.type)))return{value:r.transformedValue,onInput:n,onChange:n,onBlur:a,id:r.id};const j=`on${i.value[0].toUpperCase()}${i.value.slice(1)}`,V=`on${e.blurEventPropName[0].toUpperCase()}${e.blurEventPropName.slice(1)}`,m=e.valuePropName;return{[j]:n,[V]:a,[m]:r.transformedValue,id:r.id}}}}function $r(t,e){const r=me(),a=t.formItem??jr(t);return t.formItem&&(a.unRegisterFormField(),a.updateProps({...t,name:a.props.name??t.name}),a.registerFormField(r),_(t,ce(()=>{a.updateProps(t)},500))),_(()=>a.meta.rawValue,n=>{e("change",P(n),r)}),hr(a),{formItemInstance:a,formInstance:r}}const Pr=()=>({__IS_FAKE__:!0,props:{},handleChange(){},handleBlur(){},updateProps(){},reset(){},registerFormField(){},unRegisterFormField(){},clearValidate(){},async validate(){return{}},meta:C({rawValue:void 0,transformedValue:void 0,name:T(),id:T(),formName:T(),error:void 0,dirty:!1,touched:!1}),requiredMarkString:N(()=>"")});function Ar(){return je().provides[oe]??le(oe,Pr())}const Er=Be({name:"EzFormItemAutoBindingInput",props:{inputNodeIndex:{type:Number,required:!1},autoBinding:{type:Boolean,required:!1},changeEventPropName:{type:String,required:!1},blurEventPropName:{type:String,required:!0},valuePropName:{type:String,required:!0}},setup:(t,e)=>{var i,s;const r=Ar(),{slotData:a,getVNodesFromDefaultSlot:n,getInputItemProps:f}=xr(r,t);return t.autoBinding?()=>n().map((u,c)=>Oe(u,{key:u.patchFlag,...c===t.inputNodeIndex?f(u):{}},void 0)):(s=(i=e.slots).default)==null?void 0:s.call(i,a)}}),Mr=Er;export{Sr as $,Mr as E,W as S,Rr as a,$r as b,jr as c,_r as d,Fr as e,Vr as f,Nr as g,$ as h,M as i,R as j,me as k,ce as l,P as m,Tr as n,D as o,Ae as p,Br as u};
