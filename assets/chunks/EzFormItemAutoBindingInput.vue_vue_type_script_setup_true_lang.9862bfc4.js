import{g as L,u as je,m as ce,z as xe,U as Pe,w as $,V as ve,s as Re,q as z,p as me,A as ee,k as Ae,W as Te,l as R,X as $e,n as Be,Y as ke,F as _e,S as Me,f as De,D as Ke,L as Ce,Z as he,o as Fe,c as Le,K as ze,H as We,$ as Ue}from"../app.64b81970.js";function C(){return C=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},C.apply(this,arguments)}function Ge(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,J(t,e)}function ie(t){return ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ie(t)}function J(t,e){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,n){return a.__proto__=n,a},J(t,e)}function Ze(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function re(t,e,r){return Ze()?re=Reflect.construct.bind():re=function(n,s,i){var f=[null];f.push.apply(f,s);var o=Function.bind.apply(n,f),m=new o;return i&&J(m,i.prototype),m},re.apply(null,arguments)}function He(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function se(t){var e=typeof Map=="function"?new Map:void 0;return se=function(a){if(a===null||!He(a))return a;if(typeof a!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(a))return e.get(a);e.set(a,n)}function n(){return re(a,arguments,ie(this).constructor)}return n.prototype=Object.create(a.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),J(n,a)},se(t)}var Je=/%[sdj%]/g,Ye=function(){};typeof process<"u"&&process.env;function fe(t){if(!t||!t.length)return null;var e={};return t.forEach(function(r){var a=r.field;e[a]=e[a]||[],e[a].push(r)}),e}function I(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),a=1;a<e;a++)r[a-1]=arguments[a];var n=0,s=r.length;if(typeof t=="function")return t.apply(null,r);if(typeof t=="string"){var i=t.replace(Je,function(f){if(f==="%%")return"%";if(n>=s)return f;switch(f){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch{return"[Circular]"}break;default:return f}});return i}return t}function Xe(t){return t==="string"||t==="url"||t==="hex"||t==="email"||t==="date"||t==="pattern"}function P(t,e){return!!(t==null||e==="array"&&Array.isArray(t)&&!t.length||Xe(e)&&typeof t=="string"&&!t)}function Qe(t,e,r){var a=[],n=0,s=t.length;function i(f){a.push.apply(a,f||[]),n++,n===s&&r(a)}t.forEach(function(f){e(f,i)})}function be(t,e,r){var a=0,n=t.length;function s(i){if(i&&i.length){r(i);return}var f=a;a=a+1,f<n?e(t[f],s):r([])}s([])}function er(t){var e=[];return Object.keys(t).forEach(function(r){e.push.apply(e,t[r]||[])}),e}var qe=function(t){Ge(e,t);function e(r,a){var n;return n=t.call(this,"Async Validation Error")||this,n.errors=r,n.fields=a,n}return e}(se(Error));function rr(t,e,r,a,n){if(e.first){var s=new Promise(function(y,O){var j=function(d){return a(d),d.length?O(new qe(d,fe(d))):y(n)},c=er(t);be(c,r,j)});return s.catch(function(y){return y}),s}var i=e.firstFields===!0?Object.keys(t):e.firstFields||[],f=Object.keys(t),o=f.length,m=0,g=[],h=new Promise(function(y,O){var j=function(F){if(g.push.apply(g,F),m++,m===o)return a(g),g.length?O(new qe(g,fe(g))):y(n)};f.length||(a(g),y(n)),f.forEach(function(c){var F=t[c];i.indexOf(c)!==-1?be(F,r,j):Qe(F,r,j)})});return h.catch(function(y){return y}),h}function tr(t){return!!(t&&t.message!==void 0)}function nr(t,e){for(var r=t,a=0;a<e.length;a++){if(r==null)return r;r=r[e[a]]}return r}function we(t,e){return function(r){var a;return t.fullFields?a=nr(e,t.fullFields):a=e[r.field||t.fullField],tr(r)?(r.field=r.field||t.fullField,r.fieldValue=a,r):{message:typeof r=="function"?r():r,fieldValue:a,field:r.field||t.fullField}}}function Ve(t,e){if(e){for(var r in e)if(e.hasOwnProperty(r)){var a=e[r];typeof a=="object"&&typeof t[r]=="object"?t[r]=C({},t[r],a):t[r]=a}}return t}var Ee=function(e,r,a,n,s,i){e.required&&(!a.hasOwnProperty(e.field)||P(r,i||e.type))&&n.push(I(s.messages.required,e.fullField))},ar=function(e,r,a,n,s){(/^\s+$/.test(r)||r==="")&&n.push(I(s.messages.whitespace,e.fullField))},Q,ir=function(){if(Q)return Q;var t="[a-fA-F\\d:]",e=function(l){return l&&l.includeBoundaries?"(?:(?<=\\s|^)(?="+t+")|(?<="+t+")(?=\\s|$))":""},r="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",a="[a-fA-F\\d]{1,4}",n=(`
(?:
(?:`+a+":){7}(?:"+a+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+a+":){6}(?:"+r+"|:"+a+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+a+":){5}(?::"+r+"|(?::"+a+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+a+":){4}(?:(?::"+a+"){0,1}:"+r+"|(?::"+a+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+a+":){3}(?:(?::"+a+"){0,2}:"+r+"|(?::"+a+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+a+":){2}(?:(?::"+a+"){0,3}:"+r+"|(?::"+a+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+a+":){1}(?:(?::"+a+"){0,4}:"+r+"|(?::"+a+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+a+"){0,5}:"+r+"|(?::"+a+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),s=new RegExp("(?:^"+r+"$)|(?:^"+n+"$)"),i=new RegExp("^"+r+"$"),f=new RegExp("^"+n+"$"),o=function(l){return l&&l.exact?s:new RegExp("(?:"+e(l)+r+e(l)+")|(?:"+e(l)+n+e(l)+")","g")};o.v4=function(p){return p&&p.exact?i:new RegExp(""+e(p)+r+e(p),"g")},o.v6=function(p){return p&&p.exact?f:new RegExp(""+e(p)+n+e(p),"g")};var m="(?:(?:[a-z]+:)?//)",g="(?:\\S+(?::\\S*)?@)?",h=o.v4().source,y=o.v6().source,O="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",j="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",c="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",F="(?::\\d{2,5})?",d='(?:[/?#][^\\s"]*)?',x="(?:"+m+"|www\\.)"+g+"(?:localhost|"+h+"|"+y+"|"+O+j+c+")"+F+d;return Q=new RegExp("(?:^"+x+"$)","i"),Q},Oe={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},G={integer:function(e){return G.number(e)&&parseInt(e,10)===e},float:function(e){return G.number(e)&&!G.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return typeof e=="object"&&!G.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(Oe.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(ir())},hex:function(e){return typeof e=="string"&&!!e.match(Oe.hex)}},sr=function(e,r,a,n,s){if(e.required&&r===void 0){Ee(e,r,a,n,s);return}var i=["integer","float","array","regexp","object","method","email","number","date","url","hex"],f=e.type;i.indexOf(f)>-1?G[f](r)||n.push(I(s.messages.types[f],e.fullField,e.type)):f&&typeof r!==e.type&&n.push(I(s.messages.types[f],e.fullField,e.type))},fr=function(e,r,a,n,s){var i=typeof e.len=="number",f=typeof e.min=="number",o=typeof e.max=="number",m=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,g=r,h=null,y=typeof r=="number",O=typeof r=="string",j=Array.isArray(r);if(y?h="number":O?h="string":j&&(h="array"),!h)return!1;j&&(g=r.length),O&&(g=r.replace(m,"_").length),i?g!==e.len&&n.push(I(s.messages[h].len,e.fullField,e.len)):f&&!o&&g<e.min?n.push(I(s.messages[h].min,e.fullField,e.min)):o&&!f&&g>e.max?n.push(I(s.messages[h].max,e.fullField,e.max)):f&&o&&(g<e.min||g>e.max)&&n.push(I(s.messages[h].range,e.fullField,e.min,e.max))},W="enum",or=function(e,r,a,n,s){e[W]=Array.isArray(e[W])?e[W]:[],e[W].indexOf(r)===-1&&n.push(I(s.messages[W],e.fullField,e[W].join(", ")))},ur=function(e,r,a,n,s){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(r)||n.push(I(s.messages.pattern.mismatch,e.fullField,r,e.pattern));else if(typeof e.pattern=="string"){var i=new RegExp(e.pattern);i.test(r)||n.push(I(s.messages.pattern.mismatch,e.fullField,r,e.pattern))}}},b={required:Ee,whitespace:ar,type:sr,range:fr,enum:or,pattern:ur},lr=function(e,r,a,n,s){var i=[],f=e.required||!e.required&&n.hasOwnProperty(e.field);if(f){if(P(r,"string")&&!e.required)return a();b.required(e,r,n,i,s,"string"),P(r,"string")||(b.type(e,r,n,i,s),b.range(e,r,n,i,s),b.pattern(e,r,n,i,s),e.whitespace===!0&&b.whitespace(e,r,n,i,s))}a(i)},dr=function(e,r,a,n,s){var i=[],f=e.required||!e.required&&n.hasOwnProperty(e.field);if(f){if(P(r)&&!e.required)return a();b.required(e,r,n,i,s),r!==void 0&&b.type(e,r,n,i,s)}a(i)},cr=function(e,r,a,n,s){var i=[],f=e.required||!e.required&&n.hasOwnProperty(e.field);if(f){if(r===""&&(r=void 0),P(r)&&!e.required)return a();b.required(e,r,n,i,s),r!==void 0&&(b.type(e,r,n,i,s),b.range(e,r,n,i,s))}a(i)},mr=function(e,r,a,n,s){var i=[],f=e.required||!e.required&&n.hasOwnProperty(e.field);if(f){if(P(r)&&!e.required)return a();b.required(e,r,n,i,s),r!==void 0&&b.type(e,r,n,i,s)}a(i)},gr=function(e,r,a,n,s){var i=[],f=e.required||!e.required&&n.hasOwnProperty(e.field);if(f){if(P(r)&&!e.required)return a();b.required(e,r,n,i,s),P(r)||b.type(e,r,n,i,s)}a(i)},yr=function(e,r,a,n,s){var i=[],f=e.required||!e.required&&n.hasOwnProperty(e.field);if(f){if(P(r)&&!e.required)return a();b.required(e,r,n,i,s),r!==void 0&&(b.type(e,r,n,i,s),b.range(e,r,n,i,s))}a(i)},pr=function(e,r,a,n,s){var i=[],f=e.required||!e.required&&n.hasOwnProperty(e.field);if(f){if(P(r)&&!e.required)return a();b.required(e,r,n,i,s),r!==void 0&&(b.type(e,r,n,i,s),b.range(e,r,n,i,s))}a(i)},vr=function(e,r,a,n,s){var i=[],f=e.required||!e.required&&n.hasOwnProperty(e.field);if(f){if(r==null&&!e.required)return a();b.required(e,r,n,i,s,"array"),r!=null&&(b.type(e,r,n,i,s),b.range(e,r,n,i,s))}a(i)},hr=function(e,r,a,n,s){var i=[],f=e.required||!e.required&&n.hasOwnProperty(e.field);if(f){if(P(r)&&!e.required)return a();b.required(e,r,n,i,s),r!==void 0&&b.type(e,r,n,i,s)}a(i)},Fr="enum",br=function(e,r,a,n,s){var i=[],f=e.required||!e.required&&n.hasOwnProperty(e.field);if(f){if(P(r)&&!e.required)return a();b.required(e,r,n,i,s),r!==void 0&&b[Fr](e,r,n,i,s)}a(i)},qr=function(e,r,a,n,s){var i=[],f=e.required||!e.required&&n.hasOwnProperty(e.field);if(f){if(P(r,"string")&&!e.required)return a();b.required(e,r,n,i,s),P(r,"string")||b.pattern(e,r,n,i,s)}a(i)},wr=function(e,r,a,n,s){var i=[],f=e.required||!e.required&&n.hasOwnProperty(e.field);if(f){if(P(r,"date")&&!e.required)return a();if(b.required(e,r,n,i,s),!P(r,"date")){var o;r instanceof Date?o=r:o=new Date(r),b.type(e,o,n,i,s),o&&b.range(e,o.getTime(),n,i,s)}}a(i)},Vr=function(e,r,a,n,s){var i=[],f=Array.isArray(r)?"array":typeof r;b.required(e,r,n,i,s,f),a(i)},ne=function(e,r,a,n,s){var i=e.type,f=[],o=e.required||!e.required&&n.hasOwnProperty(e.field);if(o){if(P(r,i)&&!e.required)return a();b.required(e,r,n,f,s,i),P(r,i)||b.type(e,r,n,f,s)}a(f)},Or=function(e,r,a,n,s){var i=[],f=e.required||!e.required&&n.hasOwnProperty(e.field);if(f){if(P(r)&&!e.required)return a();b.required(e,r,n,i,s)}a(i)},H={string:lr,method:dr,number:cr,boolean:mr,regexp:gr,integer:yr,float:pr,array:vr,object:hr,enum:br,pattern:qr,date:wr,url:ne,hex:ne,email:ne,required:Vr,any:Or};function oe(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var ue=oe(),U=function(){function t(r){this.rules=null,this._messages=ue,this.define(r)}var e=t.prototype;return e.define=function(a){var n=this;if(!a)throw new Error("Cannot configure a schema with no rules");if(typeof a!="object"||Array.isArray(a))throw new Error("Rules must be an object");this.rules={},Object.keys(a).forEach(function(s){var i=a[s];n.rules[s]=Array.isArray(i)?i:[i]})},e.messages=function(a){return a&&(this._messages=Ve(oe(),a)),this._messages},e.validate=function(a,n,s){var i=this;n===void 0&&(n={}),s===void 0&&(s=function(){});var f=a,o=n,m=s;if(typeof o=="function"&&(m=o,o={}),!this.rules||Object.keys(this.rules).length===0)return m&&m(null,f),Promise.resolve(f);function g(c){var F=[],d={};function x(l){if(Array.isArray(l)){var q;F=(q=F).concat.apply(q,l)}else F.push(l)}for(var p=0;p<c.length;p++)x(c[p]);F.length?(d=fe(F),m(F,d)):m(null,f)}if(o.messages){var h=this.messages();h===ue&&(h=oe()),Ve(h,o.messages),o.messages=h}else o.messages=this.messages();var y={},O=o.keys||Object.keys(this.rules);O.forEach(function(c){var F=i.rules[c],d=f[c];F.forEach(function(x){var p=x;typeof p.transform=="function"&&(f===a&&(f=C({},f)),d=f[c]=p.transform(d)),typeof p=="function"?p={validator:p}:p=C({},p),p.validator=i.getValidationMethod(p),p.validator&&(p.field=c,p.fullField=p.fullField||c,p.type=i.getType(p),y[c]=y[c]||[],y[c].push({rule:p,value:d,source:f,field:c}))})});var j={};return rr(y,o,function(c,F){var d=c.rule,x=(d.type==="object"||d.type==="array")&&(typeof d.fields=="object"||typeof d.defaultField=="object");x=x&&(d.required||!d.required&&c.value),d.field=c.field;function p(u,v){return C({},v,{fullField:d.fullField+"."+u,fullFields:d.fullFields?[].concat(d.fullFields,[u]):[u]})}function l(u){u===void 0&&(u=[]);var v=Array.isArray(u)?u:[u];!o.suppressWarning&&v.length&&t.warning("async-validator:",v),v.length&&d.message!==void 0&&(v=[].concat(d.message));var w=v.map(we(d,f));if(o.first&&w.length)return j[d.field]=1,F(w);if(!x)F(w);else{if(d.required&&!c.value)return d.message!==void 0?w=[].concat(d.message).map(we(d,f)):o.error&&(w=[o.error(d,I(o.messages.required,d.field))]),F(w);var V={};d.defaultField&&Object.keys(c.value).map(function(E){V[E]=d.defaultField}),V=C({},V,c.rule.fields);var N={};Object.keys(V).forEach(function(E){var _=V[E],M=Array.isArray(_)?_:[_];N[E]=M.map(p.bind(null,E))});var S=new t(N);S.messages(o.messages),c.rule.options&&(c.rule.options.messages=o.messages,c.rule.options.error=o.error),S.validate(c.value,c.rule.options||o,function(E){var _=[];w&&w.length&&_.push.apply(_,w),E&&E.length&&_.push.apply(_,E),F(_.length?_:null)})}}var q;if(d.asyncValidator)q=d.asyncValidator(d,c.value,l,c.source,o);else if(d.validator){try{q=d.validator(d,c.value,l,c.source,o)}catch(u){console.error==null||console.error(u),o.suppressValidatorError||setTimeout(function(){throw u},0),l(u.message)}q===!0?l():q===!1?l(typeof d.message=="function"?d.message(d.fullField||d.field):d.message||(d.fullField||d.field)+" fails"):q instanceof Array?l(q):q instanceof Error&&l(q.message)}q&&q.then&&q.then(function(){return l()},function(u){return l(u)})},function(c){g(c)},f)},e.getType=function(a){if(a.type===void 0&&a.pattern instanceof RegExp&&(a.type="pattern"),typeof a.validator!="function"&&a.type&&!H.hasOwnProperty(a.type))throw new Error(I("Unknown rule type %s",a.type));return a.type||"string"},e.getValidationMethod=function(a){if(typeof a.validator=="function")return a.validator;var n=Object.keys(a),s=n.indexOf("message");return s!==-1&&n.splice(s,1),n.length===1&&n[0]==="required"?H.required:H[this.getType(a)]||void 0},t}();U.register=function(e,r){if(typeof r!="function")throw new Error("Cannot register a validator by type, validator is not a function");H[e]=r};U.warning=Ye;U.messages=ue;U.validators=H;const Dr=Object.freeze(Object.defineProperty({__proto__:null,default:U},Symbol.toStringTag,{value:"Module"}));function Z(t,e=[]){return t?Array.isArray(t)?t:[t]:e}const jr=Symbol("ezFormInjectKey"),le=Symbol(),de=Symbol(),Kr=Symbol(),T=L({}),Cr=()=>({name:{required:!1,type:String},form:{required:!1,type:Object},initialValues:{required:!1,type:Object},enableReinitialize:{required:!1,type:Boolean},rules:{required:!1,type:Object},validateTrigger:{required:!1,type:[String,Array]},validateMessages:{required:!1,type:Object},classPrefix:{required:!1,type:String,default:"ez"},preserveValues:{required:!1,type:Boolean,default:!0}}),Lr=()=>({label:{required:!1,type:String},name:{required:!1,type:[String,Array]},formItem:{required:!1,type:Object},defaultValue:{required:!1},valuePropName:{required:!1,type:String,default:"value"},changeEventPropName:{required:!1,type:String},blurEventPropName:{required:!1,type:String,default:"blur"},getValueFromChangeEvent:{required:!1,type:Function,default:t=>{var e;return t!=null&&t.target?(e=t.target.value)!=null?e:t.target.checked:t}},valueTransformer:{required:!1,type:Object,default:()=>({in:t=>t,out:t=>t})},autoBinding:{required:!1,type:Boolean,default:!0},inputNodeIndex:{required:!1,type:Number,default:0},rules:{required:!1,type:[Object,Array]},requiredMark:{required:!1,type:[String,Boolean],default:!0},validateTrigger:{required:!1,type:[String,Array],default:"change"},validateFirst:{required:!1,type:Boolean},noStyle:{required:!1,type:Boolean},colon:{required:!1,type:Boolean}}),zr=()=>({label:{required:!1,type:String},name:{type:[String,Array],required:!0},formList:{required:!1,type:Object},defaultValue:{required:!1,type:Array},valuePropName:{required:!1,type:String,default:"value"},changeEventPropName:{required:!1,type:String},blurEventPropName:{required:!1,type:String,default:"blur"},getValueFromChangeEvent:{required:!1,type:Function,default:t=>{var e;return t!=null&&t.target?(e=t.target.value)!=null?e:t.target.checked:t}},valueTransformer:{required:!1,type:Object,default:()=>({in:t=>t,out:t=>t})},autoBinding:{required:!1,type:Boolean,default:!0},rules:{required:!1,type:[Object,Array]},requiredMark:{required:!1,type:[String,Boolean],default:!0},validateTrigger:{required:!1,type:[String,Array],default:"change"},validateFirst:{required:!1,type:Boolean},noStyle:{required:!1,type:Boolean}});function xr(t){for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(t[e]=void 0);return t}function A(t){const e=Array.isArray(t)?[]:{};for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const a=t[r];e[r]=typeof a=="object"&&a!==null?A(a):a}return e}function D(t){return Array.isArray(t)?t.reduce((e,r)=>(e.push(String(r)),e),[]):typeof t=="string"?t.replace(/\[([\d\w]+)\]/g,".$1").split("."):[String(t)]}function k(t){return D(t).join(".")}function Y(t,e,r=void 0){const a=D(e);let n=0;for(;n<a.length&&t!=null;n++)t=t[a[n]];return n&&n===a.length?t:void 0}function ae(t,e,r,a){const n=D(e);let s=0;for(;s<n.length&&t!=null;s++){let i=r;const f=n[s];if(s!==n.length-1){const o=t[f];i=a?a(t,f,s,n):void 0,i===void 0&&(i=typeof o=="object"?o:Number.isNaN(Number(n[s+1]))?{}:[])}t[f]=i,t=t[f]}}function Pr(t,e){const r=D(e);if(t=Y(t,r.slice(0,-1)),t){const a=r.pop();a&&delete t[a]}}function K(t){return Object.values(t)}function Ie(t){je(le,t)}function Ar(t){je(de,t)}function ge(t,e=100,r=!0){let a,n;return(...s)=>(!a&&r&&(n=t(...s)),clearTimeout(a),a=setTimeout(()=>{n=t(...s)},e),n)}function te(t,e){const r=typeof t,a=typeof e;if(r!==a)return!1;if(r!=="object"&&a!=="object")return t===e;const n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(const i of n){const f=t[i],o=e[i];if(!te(f,o))return!1}return!0}function B(t=6){let e="";const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=r.length;for(let n=0;n<t;n++)e+=r.charAt(Math.floor(Math.random()*a));return e}function Ne(){return ce(jr,{})}function _r(t){var q;const e=Ne(),r=L((q=xe(t))!=null?q:{classPrefix:"ez",name:B()});r.name=r.name||B(),r.classPrefix=r.classPrefix||"ez";function a(u,v=!1){Object.assign(r,{...u,name:u.name||r.name||B(),classPrefix:u.classPrefix||"ez"}),v&&(s(r.initialValues,!0),x())}t&&Pe(t)&&$(t,()=>{a({...t})});const{initialValues:n,setInitialValues:s,getClonedInitialValues:i}=Er(ve(r,"initialValues"),ve(r,"enableReinitialize"),()=>{c(),x()}),f=L({dirty:!1,get name(){var u;return(u=r.name)!=null?u:""},values:i(),errors:[]});function o(u){f.dirty=!1,f.errors=[],u!==void 0&&(f.values=u)}const m=L({});function g(u){const v=k(u.name.value);m[v]=u,c()}function h(u){const v=k(u);r.preserveValues===!1&&Pr(f.values,u),delete m[v]}function y(u){return u?K(m).filter(({name:v})=>u?te(v,u):!0).some(({dirty:v})=>v):f.dirty}function O(u,v,w=!0){if(ae(f.values,u,v),w){f.dirty=!0;const V=m[k(u)];V&&V.markAsDirty()}}function j(u){return Y(f.values,u)}function c(){K(m).forEach(u=>{u.defaultValue!==void 0&&Y(n.value,u.name)===void 0&&ae(n.value,u.name,u.defaultValue)})}function F(u){var v,w;if(u){const V=k(u);(w=(v=m[V])==null?void 0:v.clearValidate)==null||w.call(v)}else K(m).forEach(({clearValidate:V})=>{V()})}function d(u,v){const w=Z(u),V=w.length?K(m).filter(({name:N})=>w.some(S=>te(D(S),D(N)))):K(m);return new Promise(async N=>{const S=await Promise.all(V.map(({name:M,validate:X})=>X(v).then(({value:Se,error:pe})=>pe||{name:M,value:Se}))),E=S.filter(M=>!!M.messages),_=E.length>0;N(_?{errors:E,values:void 0}:{values:S.reduce((M,X)=>(ae(M,X.name,X.value),M),{}),errors:void 0})})}Re(ge(()=>{f.errors=K(m).map(u=>u.error).filter(u=>u!==void 0)},500));function x(u){const v=!te(i(),{}),w=K(m);xr(f.values),o(),w.forEach(({reset:V})=>{V()}),u?Object.assign(f.values,A(u)):v&&Object.assign(f.values,i())}const l={meta:f,fields:m,get initialValues(){return A(n.value)},submit:(u,v)=>{if(u||v){d().then(({errors:w})=>{if(w)v==null||v(w);else{const V=A(f.values);u==null||u(V)}});return}return new Promise(w=>{d().then(({errors:V})=>{const N=V===void 0?A(f.values):void 0;w({values:N,errors:V})})})},reset:x,setFieldValue:O,getFieldValue:j,validate:d,isDirty:y,updateSettings:a,addField:g,removeField:h,clearValidate:F,get classPrefix(){var u;return(u=r.classPrefix)!=null?u:""},get rules(){return r.rules},get validateMessages(){var u;return(u=r.validateMessages)!=null?u:e==null?void 0:e.validateMessages},get validateTrigger(){return r.validateTrigger}};return Ir(f,l),Ie(l),l}function Er(t,e,r){var m,g;const a=z((m=t.value)!=null?m:{}),n=z((g=t.value)!=null?g:{}),s=z(o()),i=()=>n.value?A(ee(n)):{};function f(h,y=!1){n.value=A(h),y&&(a.value=A(h))}function o(){if(!!e.value)return $(t.value,h=>{f(A(h),!0),r(A(h))},{deep:!0})}return $(e,()=>{if(e.value){s.value=o();return}s.value&&s.value()}),{initialValues:n,originalInitialValues:a,setInitialValues:f,getClonedInitialValues:i}}function Ir(t,e){$(()=>t.name,(r,a)=>{var f,o;let n={},s={};if(a){const m=(f=T[a])==null?void 0:f.items,g=(o=T[a])==null?void 0:o.lists;n=m?A(m):{},s=g?A(g):{},delete T[a]}const i=T[r];i?(i.instance=e,i.items={...n,...i.items},i.lists={...s,...i.lists}):T[r]={instance:e,items:n,lists:s}},{immediate:!0}),me(()=>{delete T[t.name]})}function Wr(t,e){var f;const r=(f=t.form)!=null?f:_r(t);t.form&&(r.updateSettings({...t},!0),$(t,ge(()=>{r.updateSettings({...t})},500)));const a=r.submit,n=(o,m)=>o||m?a(g=>{e("submit",g),o==null||o(g)},g=>{e("error",g),m==null||m(g)}):new Promise(g=>{a().then(({values:h,errors:y})=>{y?(e("error",y),g({errors:y})):(e("submit",h),g({values:h}))})});r.submit=n;const s=r.reset,i=o=>{s(o),e("reset")};return r.reset=i,$(r.meta.values,o=>{e("change",A(o))}),Ie(r),{submit:n,reset:i,formInstance:r}}function ye(){var r;return(r=Ae().provides[le])!=null?r:ce(le,{__IS_FAKE__:!0,addField(){},removeField(){},updateSettings(){},getFieldValue(){},setFieldValue(){},reset(){},clearValidate(){},async validate(){},submit(){},isDirty(){return!1},meta:L({values:void 0,name:B(),errors:[],dirty:!1}),classPrefix:""})}function Nr(){const t=ye();return t.__IS_FAKE__&&Object.assign(t,{fields:{}}),t}function Sr(t){let e=Nr();const r=z(void 0),a=B(),n=Te(t?xe(t):{});function s(l){Object.assign(n,{...l})}t&&Pe(t)&&$(t,()=>{s({...t})});const i=L({get rawValue(){return e.__IS_FAKE__||!n.name?r.value:n.name?Y(e.meta.values,n.name):r.value},set rawValue(l){if(this.dirty=!0,this.touched=!0,e.__IS_FAKE__||!n.name){r.value=l;return}n.name&&e.setFieldValue(n.name,l)},get transformedValue(){return n.valueTransformer?n.valueTransformer.in(this.rawValue,e):this.rawValue},set transformedValue(l){this.rawValue=n.valueTransformer?n.valueTransformer.out(l,e):l},get name(){return n.name},dirty:!1,touched:!1,get id(){return n.name?`${this.formName}_${D(n.name).join("_")}`:`${this.formName}_${a}`},get formName(){return e.meta.name}});function f(){i.dirty=!1,i.touched=!1,i.error=void 0,e.__IS_FAKE__||!n.name?i.rawValue=A(n.defaultValue):n.name&&(i.rawValue=Y(e.initialValues,n.name))}const o=R(()=>{var l;return Z((l=n.validateTrigger)!=null?l:"change",Z(e.validateTrigger))}),m=R(()=>{const l=Z(n.rules);if(!n.name)return l;const q=e.rules,u=k(n.name),v=q==null?void 0:q[u],w=Z(v);return l.concat(w)});function g(){i.error=void 0}async function h(l){var w;const q=l!=null&&l.trigger?m.value.filter(V=>V.trigger?V.trigger===l.trigger:!0):m.value;if(q.length===0)return Promise.resolve({value:A(i.rawValue)});const u=n.label?n.label:n.name&&(w=D(n.name).pop())!=null?w:B(),v=new U({[u]:q});return e.validateMessages&&v.messages(e.validateMessages),new Promise(V=>{var N;v.validate({[u]:i.rawValue},{first:(N=n.validateFirst)!=null?N:!1},S=>{var E;S===null||S.length===0?(g(),V({value:i.rawValue})):(i.error={name:(E=n.name)!=null?E:[],messages:S.map(({message:_})=>_!=null?_:"")},V({error:A(i.error)}))})})}function y(l){var q;return l instanceof Event&&l.target?(q=l.target.value)!=null?q:l.target.checked:l}function O(l){i.transformedValue=n.getValueFromChangeEvent?n.getValueFromChangeEvent(l):y(l),o.value.includes("change")&&Be(()=>{h({trigger:"change"}).catch(()=>{})})}function j(){i.touched=!0,o.value.includes("blur")&&h({trigger:"blur"}).catch(()=>{})}$e(()=>{n.defaultValue!==void 0&&i.rawValue===void 0&&(i.rawValue=A(n.defaultValue))});const c=Ne(),F=R(()=>{var u;if(!m.value.some(v=>v.required))return"";const q=(u=c==null?void 0:c.requiredMark)!=null?u:"*";switch(typeof n.requiredMark){case"boolean":return n.requiredMark?`'${q}'`:"";case"string":return`'${n.requiredMark}'`;default:return`'${q}'`}});function d(){return{name:R(()=>{var l;return(l=n.name)!=null?l:[]}),id:R(()=>i.id),value:R(()=>i.rawValue),validate:h,clearValidate:g,reset:f,get defaultValue(){return n.defaultValue},error:R(()=>i.error),dirty:R(()=>i.dirty),markAsDirty(){i.dirty=!0,i.touched=!0}}}function x(l){l?(l.addField(d()),e=l):e.addField(d())}function p(l){n.name&&e.removeField(n.name),l&&e.removeField(l)}return{fieldMeta:i,requiredMarkString:F,registerFormField:x,unRegisterFormField:p,handleChange:O,handleBlur:j,validate:h,resetFieldMeta:f,clearValidate:g,updateProps:s,props:n,get injectedForm(){return e},getFormFieldObject:d}}function Rr(t){const e=Sr(t),{fieldMeta:r,validate:a,requiredMarkString:n,handleBlur:s,handleChange:i,resetFieldMeta:f,clearValidate:o,updateProps:m,props:g}=e,h={reset:f,meta:r,handleBlur:s,validate:a,handleChange:i,clearValidate:o,requiredMarkString:n,registerFormField:F,unRegisterFormField:d,updateProps:m,props:g},y=z(()=>{}),O=Tr(r,h),j=z(()=>()=>{}),c=z(()=>{});function F(x){c.value(),y.value(),e.registerFormField(x),c.value=j.value(),y.value=O()}function d(x){e.unRegisterFormField(x),c.value(),y.value()}return F(),$(()=>g.name,(x,p)=>{p&&d(p),F()},{immediate:!0}),me(()=>{d()}),h}function Tr(t,e){return me(()=>{if(!t.name)return;const r=T[t.formName];if(!r)return;const a=k(t.name);r.items&&delete r.items[a]}),()=>{const r=t.formName,a=t.formName,n=$(()=>t.name,(s,i)=>{T[t.formName]||(T[t.formName]={});let f=T[t.formName];if(!f)return;if(i){const m=k(i);f.items&&delete f.items[m]}if(!s)return;const o=k(s);f.items?f.items[o]=e:f.items={[o]:e}},{immediate:!0});return()=>{if(!a)return;const s=T[r];if(!s)return;const i=k(a);s.items&&delete s.items[i],n()}}}function $r(t,e){const{meta:r,handleBlur:a,handleChange:n}=t,s=ye(),i=R(()=>{var y;return(y=e.changeEventPropName)!=null?y:`update:${e.valuePropName}`}),f=ke(),o=R(()=>({value:r.transformedValue,rawValue:r.rawValue,handleChange:n,form:s,error:r.error})),m=()=>f.default?g(f.default):[],g=y=>{var j,c;const O=(j=y&&y(o))!=null?j:[];if(O.length&&O[0].type===_e){const{children:F}=O[0];return F===null?[]:typeof F=="string"?[Me(F)]:[...Array.isArray(F)?F:g(F.default),...O.slice(1)]}return(c=f.default&&f.default(o))!=null?c:[]};return{getVNodesFromDefaultSlot:m,slotData:o,getInputItemProps:y=>{if(y.component===null&&["input","select","textarea"].includes(String(y.type)))return{value:r.transformedValue,onInput:n,onChange:n,onBlur:a,id:r.id};const O=`on${i.value[0].toUpperCase()}${i.value.slice(1)}`,j=`on${e.blurEventPropName[0].toUpperCase()}${e.blurEventPropName.slice(1)}`,c=e.valuePropName;return{[O]:n,[j]:a,[c]:r.transformedValue,id:r.id}}}}function Ur(t,e){var n,s;const r=ye(),a=(n=t.formItem)!=null?n:Rr(t);return t.formItem&&(a.unRegisterFormField(),a.updateProps({...t,name:(s=a.props.name)!=null?s:t.name}),a.registerFormField(r),$(t,ge(()=>{a.updateProps(t)},500))),$(()=>a.meta.rawValue,i=>{e("change",A(i),r)}),Ar(a),{formItemInstance:a,formInstance:r}}const Br=()=>({__IS_FAKE__:!0,props:{},handleChange(){},handleBlur(){},updateProps(){},reset(){},registerFormField(){},unRegisterFormField(){},clearValidate(){},async validate(){},meta:L({rawValue:void 0,transformedValue:void 0,name:B(),id:B(),formName:B(),error:void 0,dirty:!1,touched:!1}),requiredMarkString:R(()=>"")});function kr(){var r;return(r=Ae().provides[de])!=null?r:ce(de,Br())}const Gr=De({__name:"EzFormItemAutoBindingInput",props:{inputNodeIndex:null,autoBinding:{type:Boolean},changeEventPropName:null,blurEventPropName:null,valuePropName:null},setup(t){const e=t,r=kr(),{slotData:a,getVNodesFromDefaultSlot:n,getInputItemProps:s}=$r(r,e);return(i,f)=>t.autoBinding?(Fe(!0),Le(_e,{key:1},ze(ee(n)(),(o,m)=>(Fe(),We(Ue(o),he({key:o.patchFlag},m===t.inputNodeIndex?ee(s)(o):void 0),null,16))),128)):Ke(i.$slots,"default",Ce(he({key:0},ee(a))))}});export{Kr as $,U as S,Gr as _,Lr as a,Ur as b,ye as c,Dr as d,Ne as e,Sr as f,Cr as g,k as h,D as i,T as j,ge as k,A as l,zr as m,Rr as n,K as o,_r as p,Wr as u};
